(this["webpackJsonppersonal-growth"]=this["webpackJsonppersonal-growth"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),o=n(23),s=n(11),l=n.n(s),u=n(14),d=n(9),g=n(45),f=n(30),j=n(67),b=n(66),p=(n(89),n.p+"static/media/quimbly.8567d3c3.png"),O=n(19),v=function(e){return{type:"SETCALENDARS",payload:e}},x=function(e){return{type:"SETMYQCALENDAR",payload:e}},h=function(e){return{type:"SETCONFIG",payload:e}},m=function(e){return{type:"TOGGLEHIDECALENDAR",payload:e}},y=function(e){return{type:"SETEVENTS",payload:e}},E=function(e){return console.log("in ISLOGGEDIN actions with",e),{type:"ISLOGGEDIN",payload:e}},C=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveconfig:",t,n),e.next=3,gapi.client.calendar.calendars.update({summary:"MyQ",description:JSON.stringify(t),calendarId:n});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.map((function(e){return Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",gapi.client.calendar.events.list({calendarId:e.id,timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"}));case 1:case"end":return t.stop()}}),t)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=n(65),T=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({calendars:t,config:n}),a=t.filter((function(e){return!n.hiddenCalendars.includes(e.id)})),console.log({visibleCalendars:a}),e.next=5,D(a);case 5:return r=e.sent,e.next=8,w.map(r,function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.result.items);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return c=(c=(c=e.sent).map((function(e,t){return e.map((function(e){return{calendar:a[t].summary,color:a[t].backgroundColor,event:e.summary,startTime:e.start.dateTime?e.start.dateTime:e.start.date,endTime:e.end.dateTime?e.end.dateTime:e.end.date}}))}))).flat(),console.log({allEvents:c}),c=c.sort((function(e,t){return e.startTime>t.startTime?1:-1})).slice(0,10),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=(n(99),n(145)),S=n(155),L=n(141),M=n(152),k=n(3);var N={setCalendars:v,toggleHideCalendar:m,setConfig:h,setMyQCalendar:x,setEvents:y,isLoggedIn:E},Q=Object(o.b)((function(e){return{DailyHabits:e.reduxData.DailyHabits,loggedIn:e.reduxData.loggedIn,calendars:e.reduxData.calendars,config:e.reduxData.config,myQCalendar:e.reduxData.myQCalendar,events:e.reduxData.events}}),N)((function(e){var t=Object(a.useState)(e.calendars.filter((function(t){return!e.config.hiddenCalendars.includes(t)})).map((function(e){return e.id}))),n=Object(d.a)(t,2),r=n[0],c=n[1],i=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c([].concat(Object(O.a)(r),[n.target.value])),"myQ"!==(a=n.target.value)){t.next=4;break}return t.abrupt("return");case 4:i=[],e.config.hiddenCalendars.includes(a)?(i=e.config.hiddenCalendars.filter((function(e){return e!==a})),console.log("removing",{newHiddenCalendars:i})):(i=[].concat(Object(O.a)(e.config.hiddenCalendars),[a]),console.log("adding",{newHiddenCalendars:i})),o={hiddenCalendars:i.filter((function(e){return e}))},e.setConfig(o),C(o,e.myQCalendar.id),T(e.calendars,o).then((function(t){e.setEvents(t)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{id:"calendars",children:Object(k.jsx)("div",{children:Object(k.jsx)(L.a,{children:Object(k.jsx)(M.a,{multiple:!0,value:r,input:Object(k.jsx)(I.a,{}),children:e.calendars.map((function(t,n){return Object(k.jsxs)(S.a,{onChange:i,style:{backgroundColor:t.backgroundColor,borderRadius:"4px",padding:"1em"},children:[Object(k.jsx)("input",{type:"checkbox",value:t.id,defaultChecked:!e.config.hiddenCalendars.includes(t.id)}),t.summary]},n)}))})})})})})),H=function(){return Object(k.jsx)("div",{id:"header",children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{id:"cal-icon",children:" \ud83d\udcc6 "}),Object(k.jsx)(Q,{}),Object(k.jsx)("div",{id:"logo-container",children:Object(k.jsx)("img",{id:"logo",src:p,alt:"quimbly logo"})})]})})},A=function(){return Object(k.jsx)("h1",{children:"In Footer"})},F=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H,{}),Object(k.jsx)("main",{children:this.props.children}),Object(k.jsx)(A,{})]})}}]),n}(r.a.Component),R=n(17),_=(n(101),n(57)),U=n.n(_),Y=n(154),G=n(148),P=n(149),V=n(147),B=n(109),z=n(156),J=n(153),Z=n(150),q=n(151),W=n(157);n(103);var K={setCalendars:v,toggleHideCalendar:m,setConfig:h,setMyQCalendar:x},X=Object(o.b)((function(e){return{calendars:e.reduxData.calendars,config:e.reduxData.config,myQCalendar:e.reduxData.myQCalendar}}),K)((function(e){var t=(new Date).toISOString().split("T")[0],n=(new Date).toLocaleTimeString().substring(0,5),r=new Date((new Date).setHours((new Date).getHours()+1)).toLocaleTimeString().substring(0,5),c={},i=Object(a.useState)([]),o=Object(d.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(!1),g=Object(d.a)(u,2),f=g[0],j=g[1],b=Object(a.useState)(""),p=Object(d.a)(b,2),v=p[0],x=p[1],h=Object(a.useState)(""),m=Object(d.a)(h,2),y=m[0],E=m[1],C=Object(a.useState)(""),D=Object(d.a)(C,2),w=D[0],T=D[1],I=Object(a.useState)(t),N=Object(d.a)(I,2),Q=N[0],H=N[1],A=Object(a.useState)(n),F=Object(d.a)(A,2),_=F[0],K=F[1],X=Object(a.useState)(r),$=Object(d.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(d.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(a.useState)(!1),oe=Object(d.a)(ie,2),se=oe[0],le=oe[1],ue=Object(a.useState)(t),de=Object(d.a)(ue,2),ge=de[0],fe=de[1],je=U()("".concat(Q," ").concat(_),"YYYY-MM-DD HH:mm").format(),be=U()("".concat(Q," ").concat(ee),"YYYY-MM-DD HH:mm").format(),pe=function(){j(!1),ce(!1),le(!1),l([])};return Object(k.jsxs)("div",{id:"add-event",children:[Object(k.jsx)(V.a,{variant:"outlined",onClick:function(){return j(!0)},children:"Add Event To Quimbly"}),Object(k.jsx)(Y.a,{open:f,onClose:pe,children:Object(k.jsx)(G.a,{variant:"outlined",children:Object(k.jsxs)(P.a,{children:[Object(k.jsx)(B.a,{variant:"h5",component:"h2",children:"Add Event"}),Object(k.jsxs)("form",{children:[Object(k.jsx)(z.a,{onChange:function(e){return x(e.target.value)},id:"event-name",label:"Event Name"}),Object(k.jsx)(z.a,{onChange:function(e){return E(e.target.value)},id:"event-location",label:"Event Location"}),Object(k.jsx)(z.a,{onChange:function(e){return T(e.target.value)},id:"event-description",label:"Event Description"}),Object(k.jsx)(z.a,{onChange:function(e){return H(e.target.value)},type:"date",defaultValue:t,id:"event-date",label:"Event Date"}),Object(k.jsx)(z.a,{onChange:function(e){return K(e.target.value)},label:"Event Start Time",type:"time",defaultValue:n,id:"event-start-time"}),Object(k.jsx)(z.a,{onChange:function(e){return te(e.target.value)},label:"Event End Time",type:"time",defaultValue:r,id:"event-end-time"}),Object(k.jsx)(z.a,{onChange:function(e){return l([].concat(Object(O.a)(s),[{email:e.target.value}]))},label:"Email of Attendee",id:"attendee-email"}),Object(k.jsx)(L.a,{component:"fieldset",children:Object(k.jsx)(Z.a,{children:Object(k.jsx)(q.a,{control:Object(k.jsx)(J.a,{onChange:function(){return ce(!re)}}),label:"Recurring Event"})})}),re&&Object(k.jsxs)(L.a,{children:[Object(k.jsx)(W.a,{children:"Repeats"}),Object(k.jsxs)(M.a,{onChange:function(e){return le(e.target.value)},children:[Object(k.jsx)(S.a,{value:"DAILY",children:"Daily"}),Object(k.jsx)(S.a,{value:"WEEKLY",children:"Weekly"}),Object(k.jsx)(S.a,{value:"MONTHLY",children:"Monthly"}),Object(k.jsx)(S.a,{value:"YEARLY",children:"Yearly"})]}),Object(k.jsx)(z.a,{onChange:function(e){var t=new Date(e.target.value).toISOString().replace(/[-:\.]/g,""),n=t.substring(0,t.length-4),a="".concat(n,"Z");console.log({newformattedDate:a,formattedDateStart:n}),fe(a)},type:"date",defaultValue:t,id:"recurring-event-date",label:"End Date"})]}),Object(k.jsx)(V.a,{onClick:function(){return j(!1)},variant:"outlined",color:"secondary",children:"Close"}),Object(k.jsx)(V.a,{onClick:function(){c=Object(R.a)(Object(R.a)({},c),{},{summary:v,location:y,description:w,start:{dateTime:je,timeZone:e.myQCalendar.timeZone},end:{dateTime:be,timeZone:e.myQCalendar.timeZone},attendees:s}),se&&(c.recurrence=["RRULE:FREQ=".concat(se,";UNTIL=").concat(ge)]),gapi.client.calendar.events.insert({calendarId:e.myQCalendar.id,resource:c}).execute((function(e){console.log("Event created: "+e.htmlLink)})),pe()},variant:"outlined",color:"primary",children:"Save changes"})]})]})})})]})})),$={dailyTasks:[],calendars:[],events:[],user:"bob",loggedIn:!1,config:{hiddenCalendars:[]},myQCalendar:{}};window.reduxData=$;var ee=$;function te(){return(te=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.client.calendar.calendars.insert({summary:"MyQ",description:JSON.stringify(ee.config)});case 2:return t=e.sent,console.log(t.result),e.abrupt("return",t.result);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(){return te.apply(this,arguments)};function ae(){return(ae=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.find((function(e){return"MyQ"===e.summary})),console.log("found myQCal in loadConfig",{myQCalendar:n}),n){e.next=7;break}return console.log("no myQ calendar - creating one"),e.next=6,ne();case 6:n=e.sent;case 7:try{a=JSON.parse(n.description)}catch(r){console.error("ERROR",r)}if(a){e.next=12;break}return a=ee.config,e.next=12,C(a,n.id);case 12:return e.abrupt("return",{config:a,myQCalendar:n});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(e){return ae.apply(this,arguments)};var ce=function(e){var t={width:"100%",height:"5px",borderBottom:"5px solid darkred",position:"absolute",top:e.nowLineLocation};return setInterval((function(){var t=(new Date).getMinutes();e.setCurrentMinutes(t)}),1e4),Object(k.jsx)("div",{style:t,id:"now-line"})};var ie=function(e){return Object(k.jsx)("div",{id:"event-locations",children:e.eventLocation&&e.eventLocation.map((function(e,t){var n={backgroundColor:e.color,position:"absolute",top:e.startingPixels,height:e.height,color:"white",padding:"1em",width:e.width,left:e.left,textAlign:"center",border:"1px solid gray",zIndex:e.zIndex};return Object(k.jsx)("div",{style:n,children:e.event},t)}))})},oe=n(22),se=n.n(oe);n(104);var le,ue={setCalendars:v,toggleHideCalendar:m,setConfig:h,setMyQCalendar:x,setEvents:y,isLoggedIn:E},de=Object(o.b)((function(e){return{DailyHabits:e.reduxData.DailyHabits,loggedIn:e.reduxData.loggedIn,calendars:e.reduxData.calendars,config:e.reduxData.config,myQCalendar:e.reduxData.myQCalendar,events:e.reduxData.events}}),ue)((function(e){var t=(new Date).getHours()+se.a.MINIMUM_EVENT_TIME/1e3/60/60,n=Object(a.useState)(0),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)("135px"),s=Object(d.a)(o,2),l=s[0],u=s[1],g=Object(a.useState)([]),f=Object(d.a)(g,2),j=f[0],b=f[1];Object(a.useEffect)((function(){T(e.calendars,e.config).then((function(t){e.setEvents(t),p(t)}))}),[]);var p=function(e){var t=(new Date).getTime()+se.a.MAMIMUM_EVENT_TIME,n=(new Date).getTime()+se.a.MINIMUM_EVENT_TIME,a=e.filter((function(e){if(!e.startTime.split("T")[1])return new Date(e.startTime).getDate()+1===(new Date).getDate()&&(e.allDay=!0,!0);var a=new Date(e.startTime).getTime();return t>=a&&a>=n||void 0})),r=[],c=a.map((function(e,t){var a=Object(R.a)(Object(R.a)({},e),{},{startingPixels:0,endingPixels:0,height:0,left:0,width:"200px",numOfEvents:0}),c=(new Date).getDate(),i=new Date(e.startTime).getDate(),o=new Date(n).getHours(),s=new Date(e.startTime).getHours()-o,l=new Date(e.startTime).getMinutes(),u=new Date(e.endTime).getHours()-o,d=new Date(e.endTime).getMinutes();return a.startingPixels="".concat(c===i?se.a.OUTLINE_OFFSET+60*s+l:se.a.OUTLINE_OFFSET+1440+60*s+l,"px"),a.endingPixels="".concat(c===i?se.a.OUTLINE_OFFSET+60*u+d:se.a.OUTLINE_OFFSET+1440+60*u+d,"px"),a.height="".concat(se.a.OUTLINE_OFFSET+60*u+d-(se.a.OUTLINE_OFFSET+60*s+l),"px"),r.push(a),console.log({allEventLocations:r}),r.forEach((function(e,n){e.startingPixels<=a.startingPixels&&a.startingPixels<=e.endingPixels&&n!==t&&(console.log(a.event,"found a dup event",e,a),a.numOfEvents++,a.left="".concat(180*a.numOfEvents,"px"))})),e.allDay&&(a.startingPixels="183px",a.left="50px",a.zIndex=5),a}));b(c)};Object(a.useEffect)((function(){u(se.a.OUTLINE_OFFSET+120+c)}),[c]);var O={display:"block",fontSize:".8em",paddingTop:"5px",height:"60px",textAlign:"right",borderBottom:"1px dotted black"};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{style:{backgroundColor:"white",position:"fixed",top:"180px",borderBottom:"2px solid black",width:"100%",height:"39px",zIndex:"2"},children:Object(k.jsx)("div",{style:{borderRadius:"15px",backgroundColor:"darkCyan",color:"white",width:"25px",height:"25px",textAlign:"center",lineHeight:"25px",position:"fixed"},id:"date",children:(new Date).getDate()})}),Object(k.jsx)("div",{id:"calendar-outline",children:new Array(26).fill(1).map((function(e,n){var a=new Date;a.setHours(t+n),a.setMinutes(0),a.setSeconds(0);var r="".concat(a.toLocaleString().split(" ")[2]),c="".concat(a.toLocaleString().split(" ")[1].split(":")[0]),i="".concat(a.toLocaleString().split(" ")[1].split(":")[1]),o="".concat(c,":").concat(i).concat(r);return Object(k.jsx)("div",{style:O,className:"fifteen-min",children:o},n)}))}),Object(k.jsx)(ie,{eventLocation:j}),Object(k.jsx)(ce,{setCurrentMinutes:i,nowLineLocation:l})]})}));var ge={setCalendars:v,toggleHideCalendar:m,setConfig:h,setMyQCalendar:x,setEvents:y,isLoggedIn:E},fe=Object(o.b)((function(e){return{DailyHabits:e.reduxData.DailyHabits,loggedIn:e.reduxData.loggedIn,calendars:e.reduxData.calendars,config:e.reduxData.config,myQCalendar:e.reduxData.myQCalendar,events:e.reduxData.events}}),ge)((function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1];console.log("APP",{props:e});var i=Object(a.useCallback)((function(){window.gapi.client.init({discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],clientId:"666346298716-glkmqvi7n7djp4a69757cnvjhga7skkp.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar"}).then((function(){var t=gapi.auth2.getAuthInstance().isSignedIn.get(),n=function(){var t=Object(u.a)(l.a.mark((function t(){var n,a,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("user is signed in"),e.isLoggedIn(!0),t.next=4,gapi.client.calendar.calendarList.list();case 4:return n=t.sent,a=n.result.items,t.next=8,re(a);case 8:r=t.sent,i=r.config,o=r.myQCalendar,a.find((function(e){return e.id===o.id}))||a.push(o),e.setConfig(i),e.setCalendars(a),e.setMyQCalendar(o),console.log("config!!!",{config:i,calendars:a,myQCalendar:o}),c(!0);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(!t)return console.log("not logged in"),gapi.auth2.getAuthInstance().isSignedIn.listen(n),gapi.auth2.getAuthInstance().signIn();n()})).catch((function(e){return console.error("in catch for initClient",e)}))}),[e]),o=Object(a.useCallback)((function(){var e;le=!0;var t=document.getElementsByTagName("script")[0];document.getElementById("google-jssdk")?window.onGoogleLoad():((e=document.createElement("script")).id="google-jssdk",e.src="https://apis.google.com/js/api.js?onload=onGoogleLoad",e.onload="onGoogleLoad",t.parentNode.insertBefore(e,t))}),[]);return Object(a.useEffect)((function(){window.onGoogleLoad=function(){window.gapi.load("client",i)},le||o()}),[i,o]),Object(k.jsx)(F,{children:r&&Object(k.jsxs)("div",{children:[Object(k.jsx)(de,{}),Object(k.jsx)(X,{})]})})})),je=(n(105),n(106),n(41)),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SETCONFIG":return Object(R.a)(Object(R.a)({},e),{},{config:a});case"SETCALENDARS":return Object(R.a)(Object(R.a)({},e),{},{calendars:a});case"SETEVENTS":return Object(R.a)(Object(R.a)({},e),{},{events:a});case"SETMYQCALENDAR":return Object(R.a)(Object(R.a)({},e),{},{myQCalendar:a});case"SETUSER":return e.User=a,e;case"ISLOGGEDIN":return e.loggedIn=a,e;default:return e}},pe=Object(je.b)({reduxData:be}),Oe=function(){return Object(je.c)(pe)}();function ve(){return Object(k.jsx)(o.a,{store:Oe,children:Object(k.jsx)(fe,{})})}var xe=document.getElementById("root");i.a.render(Object(k.jsx)(ve,{}),xe)},22:function(e,t){e.exports={MINIMUM_EVENT_TIME:-72e5,MAMIMUM_EVENT_TIME:864e5,OUTLINE_OFFSET:217}},89:function(e,t,n){},99:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.9fe69def.chunk.js.map